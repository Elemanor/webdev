<!-- Accessible Problem Cards Section - Dr. Amara Johnson-Liu's Implementation -->
<section class="problems-section py-5" role="region" aria-label="Basement waterproofing problems we solve">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold mb-3">
                We Fix Every Basement Problem - 
                <span class="text-primary">Select Your Issue Below</span>
            </h2>
            <p class="lead text-muted">
                Choose your specific problem to learn about our solutions and pricing
            </p>
        </div>
        
        <!-- Problem Cards Grid -->
        <div class="row g-4" role="list">
            <!-- Basement Flooding Card -->
            <div class="col-md-4 col-sm-6" role="listitem">
                <article class="card h-100 shadow-sm problem-card">
                    <div class="card-body text-center p-4">
                        <!-- Icon with proper alt text -->
                        <div class="problem-icon-wrapper mb-3">
                            <i class="fas fa-water fa-3x text-primary" aria-hidden="true"></i>
                            <span class="visually-hidden">Basement flooding icon</span>
                        </div>
                        
                        <h3 class="h5 fw-bold mb-3">Basement Flooding</h3>
                        
                        <!-- Visual progression with text alternative -->
                        <div class="problem-progression mb-3" aria-label="Solution process: Water problem becomes protected basement">
                            <span class="badge bg-danger">
                                <i class="fas fa-tint" aria-hidden="true"></i>
                                Water Problem
                            </span>
                            <span class="mx-2" aria-hidden="true">→</span>
                            <span class="visually-hidden">becomes</span>
                            <span class="badge bg-success">
                                <i class="fas fa-shield-alt" aria-hidden="true"></i>
                                Protected
                            </span>
                        </div>
                        
                        <p class="text-muted mb-3">
                            Complete waterproofing systems that stop water permanently. 
                            Interior and exterior solutions with lifetime warranty.
                        </p>
                        
                        <!-- Price with clear labeling -->
                        <p class="h6 text-primary mb-3">
                            <span class="visually-hidden">Price:</span>
                            <strong>Starting from $3,000</strong>
                        </p>
                        
                        <a href="/services/basement-waterproofing/" 
                           class="btn btn-primary btn-sm"
                           aria-label="View basement flooding solutions">
                            View Solutions
                            <i class="fas fa-arrow-right ms-1" aria-hidden="true"></i>
                        </a>
                    </div>
                </article>
            </div>
            
            <!-- Foundation Cracks Card -->
            <div class="col-md-4 col-sm-6" role="listitem">
                <article class="card h-100 shadow-sm problem-card">
                    <div class="card-body text-center p-4">
                        <div class="problem-icon-wrapper mb-3">
                            <i class="fas fa-exclamation-triangle fa-3x text-danger" aria-hidden="true"></i>
                            <span class="visually-hidden">Foundation crack warning icon</span>
                        </div>
                        
                        <h3 class="h5 fw-bold mb-3">Foundation Cracks</h3>
                        
                        <div class="problem-progression mb-3" aria-label="Solution process: Crack becomes sealed">
                            <span class="badge bg-warning text-dark">
                                <i class="fas fa-bolt" aria-hidden="true"></i>
                                Crack
                            </span>
                            <span class="mx-2" aria-hidden="true">→</span>
                            <span class="visually-hidden">becomes</span>
                            <span class="badge bg-success">
                                <i class="fas fa-band-aid" aria-hidden="true"></i>
                                Sealed
                            </span>
                        </div>
                        
                        <p class="text-muted mb-3">
                            Professional crack injection that seals leaks forever. 
                            Structural repairs for settling foundations.
                        </p>
                        
                        <p class="h6 text-primary mb-3">
                            <span class="visually-hidden">Price:</span>
                            <strong>Starting from $500 per crack</strong>
                        </p>
                        
                        <a href="/services/foundation-repair/" 
                           class="btn btn-danger btn-sm"
                           aria-label="View foundation crack repair solutions">
                            Fix Cracks Now
                            <i class="fas fa-wrench ms-1" aria-hidden="true"></i>
                        </a>
                    </div>
                </article>
            </div>
            
            <!-- Wet/Damp Basement Card -->
            <div class="col-md-4 col-sm-6" role="listitem">
                <article class="card h-100 shadow-sm problem-card">
                    <div class="card-body text-center p-4">
                        <div class="problem-icon-wrapper mb-3">
                            <i class="fas fa-tint fa-3x text-warning" aria-hidden="true"></i>
                            <span class="visually-hidden">Damp basement icon</span>
                        </div>
                        
                        <h3 class="h5 fw-bold mb-3">Wet or Damp Basement</h3>
                        
                        <div class="problem-progression mb-3" aria-label="Solution process: Damp becomes dry">
                            <span class="badge bg-info">
                                <i class="fas fa-cloud-rain" aria-hidden="true"></i>
                                Damp
                            </span>
                            <span class="mx-2" aria-hidden="true">→</span>
                            <span class="visually-hidden">becomes</span>
                            <span class="badge bg-warning text-dark">
                                <i class="fas fa-sun" aria-hidden="true"></i>
                                Dry
                            </span>
                        </div>
                        
                        <p class="text-muted mb-3">
                            Advanced drainage systems and vapor barriers. 
                            Transform damp basements into dry living space.
                        </p>
                        
                        <p class="h6 text-primary mb-3">
                            <span class="visually-hidden">Price:</span>
                            <strong>Starting from $5,000</strong>
                        </p>
                        
                        <a href="/services/interior-waterproofing/" 
                           class="btn btn-warning btn-sm"
                           aria-label="View damp basement solutions">
                            Get Dry
                            <i class="fas fa-tint-slash ms-1" aria-hidden="true"></i>
                        </a>
                    </div>
                </article>
            </div>
            
            <!-- Sump Pump Issues Card -->
            <div class="col-md-4 col-sm-6" role="listitem">
                <article class="card h-100 shadow-sm problem-card">
                    <div class="card-body text-center p-4">
                        <div class="problem-icon-wrapper mb-3">
                            <i class="fas fa-plug fa-3x text-info" aria-hidden="true"></i>
                            <span class="visually-hidden">Sump pump icon</span>
                        </div>
                        
                        <h3 class="h5 fw-bold mb-3">Sump Pump Issues</h3>
                        
                        <div class="problem-progression mb-3" aria-label="Solution process: Failed pump gets battery backup">
                            <span class="badge bg-danger">
                                <i class="fas fa-power-off" aria-hidden="true"></i>
                                Failed
                            </span>
                            <span class="mx-2" aria-hidden="true">→</span>
                            <span class="visually-hidden">becomes</span>
                            <span class="badge bg-success">
                                <i class="fas fa-battery-full" aria-hidden="true"></i>
                                Backup Ready
                            </span>
                        </div>
                        
                        <p class="text-muted mb-3">
                            Triple-pump systems with battery backup. 
                            Never worry about power outages again.
                        </p>
                        
                        <p class="h6 text-primary mb-3">
                            <span class="visually-hidden">Price:</span>
                            <strong>Starting from $2,500</strong>
                        </p>
                        
                        <a href="/services/sump-pump-installation/" 
                           class="btn btn-info btn-sm"
                           aria-label="View sump pump upgrade solutions">
                            Upgrade Now
                            <i class="fas fa-bolt ms-1" aria-hidden="true"></i>
                        </a>
                    </div>
                </article>
            </div>
            
            <!-- Complete Protection Card (Featured) -->
            <div class="col-md-4 col-sm-6" role="listitem">
                <article class="card h-100 shadow-lg border-primary problem-card position-relative">
                    <div class="position-absolute top-0 end-0 bg-primary text-white px-3 py-1 rounded-start">
                        <small>
                            <i class="fas fa-star me-1" aria-hidden="true"></i>
                            <span>Most Popular</span>
                        </small>
                    </div>
                    <div class="card-body text-center p-4">
                        <div class="problem-icon-wrapper mb-3">
                            <i class="fas fa-shield-alt fa-3x text-success" aria-hidden="true"></i>
                            <span class="visually-hidden">Complete protection shield icon</span>
                        </div>
                        
                        <h3 class="h5 fw-bold mb-3">Complete Protection</h3>
                        
                        <div class="problem-progression mb-3" aria-label="Complete home protection with lifetime warranty">
                            <span class="badge bg-primary">
                                <i class="fas fa-home" aria-hidden="true"></i>
                                100% Coverage
                            </span>
                            <span class="mx-2">+</span>
                            <span class="badge bg-success">
                                <i class="fas fa-infinity" aria-hidden="true"></i>
                                Lifetime Warranty
                            </span>
                        </div>
                        
                        <p class="text-muted mb-3">
                            Full interior and exterior waterproofing. 
                            The ultimate basement protection system.
                        </p>
                        
                        <p class="h6 text-primary mb-3">
                            <span class="visually-hidden">Price:</span>
                            <strong>Starting from $15,000</strong>
                        </p>
                        
                        <a href="/contact/" 
                           class="btn btn-success btn-sm"
                           aria-label="Get quote for complete basement protection">
                            Get Ultimate Protection
                            <i class="fas fa-star ms-1" aria-hidden="true"></i>
                        </a>
                    </div>
                </article>
            </div>
            
            <!-- Emergency Response Card -->
            <div class="col-md-4 col-sm-6" role="listitem">
                <article class="card h-100 shadow-lg border-danger problem-card position-relative">
                    <div class="card-header bg-danger text-white text-center">
                        <strong>
                            <i class="fas fa-phone-alt me-1" aria-hidden="true"></i>
                            24/7 EMERGENCY SERVICE
                        </strong>
                    </div>
                    <div class="card-body text-center p-4">
                        <div class="problem-icon-wrapper mb-3">
                            <i class="fas fa-exclamation-triangle fa-3x text-danger" role="img" aria-label="Emergency warning"></i>
                        </div>
                        
                        <h3 class="h5 fw-bold mb-3 text-danger">Flooding Now?</h3>
                        
                        <div class="alert alert-danger mb-3" role="alert">
                            <i class="fas fa-clock" aria-hidden="true"></i>
                            <strong>Response in under 2 hours</strong>
                        </div>
                        
                        <p class="text-muted mb-3">
                            Emergency crews ready 24/7 across Toronto. 
                            We'll stop the flooding and protect your home.
                        </p>
                        
                        <a href="tel:4375450067" 
                           class="btn btn-danger btn-lg w-100"
                           aria-label="Call emergency waterproofing service at 437-545-0067">
                            <i class="fas fa-phone-alt me-2" aria-hidden="true"></i>
                            CALL NOW: (437) 545-0067
                        </a>
                    </div>
                </article>
            </div>
        </div>
        
        <!-- Problem Diagnosis Tool -->
        <div class="text-center mt-5">
            <div class="d-inline-flex flex-column align-items-center">
                <p class="text-muted mb-3">
                    <i class="fas fa-question-circle me-2" aria-hidden="true"></i>
                    Not sure which solution you need?
                </p>
                <button type="button" 
                        class="btn btn-outline-primary btn-lg"
                        onclick="startAccessibleDiagnosis()"
                        aria-label="Start free basement problem diagnosis tool">
                    <i class="fas fa-stethoscope me-2" aria-hidden="true"></i>
                    Start Free Diagnosis
                    <i class="fas fa-arrow-right ms-2" aria-hidden="true"></i>
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Accessible CSS -->
<style>
/* Problem Cards */
.problem-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
}

.problem-card:hover,
.problem-card:focus-within {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
}

/* Focus Styles */
.problem-card a:focus-visible {
    outline: 3px solid #0080ff;
    outline-offset: 2px;
}

/* Icon Wrapper */
.problem-icon-wrapper {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 80px;
    height: 80px;
    background: rgba(0, 128, 255, 0.1);
    border-radius: 50%;
}

.problem-icon-wrapper i {
    transition: transform 0.3s ease;
}

.problem-card:hover .problem-icon-wrapper i {
    transform: scale(1.1);
}

/* Problem Progression */
.problem-progression {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    flex-wrap: wrap;
}

/* High Contrast Support */
@media (prefers-contrast: high) {
    .problem-card {
        border: 2px solid currentColor;
    }
    
    .badge {
        border: 1px solid currentColor;
    }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
    .problem-card,
    .problem-icon-wrapper i {
        transition: none;
    }
}

/* Mobile Optimizations */
@media (max-width: 768px) {
    .problem-progression {
        font-size: 0.875rem;
    }
    
    .problem-icon-wrapper {
        width: 60px;
        height: 60px;
    }
    
    .problem-icon-wrapper i {
        font-size: 1.5rem;
    }
}

/* Print Styles */
@media print {
    .problem-card {
        break-inside: avoid;
        box-shadow: none !important;
        border: 1px solid #000;
    }
}
</style>

<!-- Accessible JavaScript -->
<script>
// Accessible Problem Diagnosis Tool
function startAccessibleDiagnosis() {
    const button = event.currentTarget;
    const originalText = button.innerHTML;
    
    // Update button state
    button.setAttribute('aria-busy', 'true');
    button.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>Analyzing...';
    
    // Announce to screen readers
    const announcement = document.createElement('div');
    announcement.setAttribute('role', 'status');
    announcement.setAttribute('aria-live', 'polite');
    announcement.className = 'visually-hidden';
    announcement.textContent = 'Starting problem diagnosis. Please wait.';
    document.body.appendChild(announcement);
    
    // Visual feedback on cards
    const cards = document.querySelectorAll('.problem-card');
    cards.forEach((card, index) => {
        setTimeout(() => {
            card.style.transform = 'scale(1.05)';
            setTimeout(() => {
                card.style.transform = '';
            }, 300);
        }, index * 100);
    });
    
    // Reset after animation
    setTimeout(() => {
        button.setAttribute('aria-busy', 'false');
        button.innerHTML = originalText;
        announcement.textContent = 'Diagnosis complete. Please select the problem that best matches your situation.';
        
        // Focus first problem card
        const firstCard = document.querySelector('.problem-card a');
        if (firstCard) {
            firstCard.focus();
        }
        
        // Clean up announcement
        setTimeout(() => announcement.remove(), 2000);
    }, cards.length * 100 + 500);
}

// Keyboard navigation enhancement
document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.problem-card');
    
    cards.forEach(card => {
        // Make entire card clickable via keyboard
        card.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                const link = card.querySelector('a');
                if (link && e.target !== link) {
                    e.preventDefault();
                    link.click();
                }
            }
        });
        
        // Add hover effect on focus
        const link = card.querySelector('a');
        if (link) {
            link.addEventListener('focus', () => card.classList.add('focused'));
            link.addEventListener('blur', () => card.classList.remove('focused'));
        }
    });
});
</script>