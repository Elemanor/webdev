<!-- Case Studies/Portfolio Section - Visual Proof of Excellence -->
<section class="py-5 bg-white animate-on-scroll" data-animation="animate__fadeIn" id="portfolio">
    <div class="container">
        <div class="text-center mb-5">
            <span class="badge bg-success px-3 py-2 mb-3">Success Stories</span>
            <h2 class="display-5 fw-bold">Toronto Basement Waterproofing Case Studies</h2>
            <p class="lead text-muted">Real projects, real results - see how we transform Toronto basements</p>
        </div>
        
        <!-- Filter Buttons -->
        <div class="text-center mb-4">
            <div class="btn-group flex-wrap" role="group">
                <button type="button" class="btn btn-outline-primary active" onclick="filterProjects('all')">All Projects</button>
                <button type="button" class="btn btn-outline-primary" onclick="filterProjects('flooding')">Flooding Fix</button>
                <button type="button" class="btn btn-outline-primary" onclick="filterProjects('foundation')">Foundation</button>
                <button type="button" class="btn btn-outline-primary" onclick="filterProjects('underpinning')">Underpinning</button>
                <button type="button" class="btn btn-outline-primary" onclick="filterProjects('emergency')">Emergency</button>
            </div>
        </div>
        
        <!-- Case Studies Grid -->
        <div class="row g-4" id="projectGrid">
            <!-- Project 1 - Emergency Flooding -->
            <div class="col-lg-6 project-item" data-category="emergency flooding">
                <div class="card h-100 shadow-lg border-0 overflow-hidden hover-shadow animate-on-scroll" data-animation="animate__fadeInUp">
                    <div class="position-relative">
                        <div id="project1Carousel" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                <div class="carousel-item active">
                                    <img src="/images/case-yorkville-before.jpg" class="d-block w-100" alt="Yorkville basement flooding before">
                                    <div class="position-absolute top-0 start-0 bg-danger text-white px-3 py-1 m-2">
                                        <small>BEFORE</small>
                                    </div>
                                </div>
                                <div class="carousel-item">
                                    <img src="/images/case-yorkville-during.jpg" class="d-block w-100" alt="Yorkville waterproofing in progress">
                                    <div class="position-absolute top-0 start-0 bg-warning text-dark px-3 py-1 m-2">
                                        <small>DURING</small>
                                    </div>
                                </div>
                                <div class="carousel-item">
                                    <img src="/images/case-yorkville-after.jpg" class="d-block w-100" alt="Yorkville basement waterproofed">
                                    <div class="position-absolute top-0 start-0 bg-success text-white px-3 py-1 m-2">
                                        <small>AFTER</small>
                                    </div>
                                </div>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#project1Carousel" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon"></span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#project1Carousel" data-bs-slide="next">
                                <span class="carousel-control-next-icon"></span>
                            </button>
                        </div>
                    </div>
                    <div class="card-body p-4">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <span class="badge bg-danger">Emergency Response</span>
                            <small class="text-muted">Yorkville, Toronto</small>
                        </div>
                        <h4 class="h5 mb-3">Century Home Emergency Flood Recovery</h4>
                        <p class="text-muted mb-3">
                            100-year-old Yorkville home experienced catastrophic flooding during July storms. 
                            Our team arrived within 90 minutes to extract water and implement permanent waterproofing.
                        </p>
                        
                        <div class="row g-3 mb-3">
                            <div class="col-4 text-center">
                                <div class="text-primary h5 mb-0">6"</div>
                                <small class="text-muted">Water Depth</small>
                            </div>
                            <div class="col-4 text-center">
                                <div class="text-success h5 mb-0">72hr</div>
                                <small class="text-muted">To Completion</small>
                            </div>
                            <div class="col-4 text-center">
                                <div class="text-warning h5 mb-0">$3,400</div>
                                <small class="text-muted">City Rebate</small>
                            </div>
                        </div>
                        
                        <div class="border-top pt-3">
                            <h6 class="mb-2">Solutions Implemented:</h6>
                            <ul class="list-unstyled mb-0">
                                <li><i class="fas fa-check text-success me-2"></i>Interior drainage system with triple pump</li>
                                <li><i class="fas fa-check text-success me-2"></i>Foundation crack injection (8 cracks)</li>
                                <li><i class="fas fa-check text-success me-2"></i>Battery backup system installation</li>
                            </ul>
                        </div>
                        
                        <div class="mt-3">
                            <a href="/case-studies/yorkville-emergency/" class="btn btn-primary btn-sm">
                                View Full Case Study <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Project 2 - Foundation Repair -->
            <div class="col-lg-6 project-item" data-category="foundation">
                <div class="card h-100 shadow-lg border-0 overflow-hidden hover-shadow animate-on-scroll" data-animation="animate__fadeInUp" style="animation-delay: 0.1s;">
                    <div class="position-relative">
                        <div id="project2Carousel" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                <div class="carousel-item active">
                                    <img src="/images/case-beaches-before.jpg" class="d-block w-100" alt="The Beaches foundation cracks">
                                    <div class="position-absolute top-0 start-0 bg-danger text-white px-3 py-1 m-2">
                                        <small>BEFORE</small>
                                    </div>
                                </div>
                                <div class="carousel-item">
                                    <img src="/images/case-beaches-after.jpg" class="d-block w-100" alt="The Beaches foundation repaired">
                                    <div class="position-absolute top-0 start-0 bg-success text-white px-3 py-1 m-2">
                                        <small>AFTER</small>
                                    </div>
                                </div>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#project2Carousel" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon"></span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#project2Carousel" data-bs-slide="next">
                                <span class="carousel-control-next-icon"></span>
                            </button>
                        </div>
                    </div>
                    <div class="card-body p-4">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <span class="badge bg-warning text-dark">Foundation Repair</span>
                            <small class="text-muted">The Beaches, Toronto</small>
                        </div>
                        <h4 class="h5 mb-3">Structural Foundation Crack Repair</h4>
                        <p class="text-muted mb-3">
                            1920s Beaches home with severe foundation settlement causing structural cracks and water infiltration. 
                            Complete exterior excavation and waterproofing restored structural integrity.
                        </p>
                        
                        <div class="row g-3 mb-3">
                            <div class="col-4 text-center">
                                <div class="text-primary h5 mb-0">12</div>
                                <small class="text-muted">Major Cracks</small>
                            </div>
                            <div class="col-4 text-center">
                                <div class="text-success h5 mb-0">7 days</div>
                                <small class="text-muted">Project Time</small>
                            </div>
                            <div class="col-4 text-center">
                                <div class="text-warning h5 mb-0">Lifetime</div>
                                <small class="text-muted">Warranty</small>
                            </div>
                        </div>
                        
                        <div class="border-top pt-3">
                            <h6 class="mb-2">Solutions Implemented:</h6>
                            <ul class="list-unstyled mb-0">
                                <li><i class="fas fa-check text-success me-2"></i>Full exterior excavation & waterproofing</li>
                                <li><i class="fas fa-check text-success me-2"></i>Structural crack repair with steel reinforcement</li>
                                <li><i class="fas fa-check text-success me-2"></i>New drainage system installation</li>
                            </ul>
                        </div>
                        
                        <div class="mt-3">
                            <a href="/case-studies/beaches-foundation/" class="btn btn-primary btn-sm">
                                View Full Case Study <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Project 3 - Underpinning -->
            <div class="col-lg-6 project-item" data-category="underpinning">
                <div class="card h-100 shadow-lg border-0 overflow-hidden hover-shadow animate-on-scroll" data-animation="animate__fadeInUp" style="animation-delay: 0.2s;">
                    <div class="position-relative">
                        <div id="project3Carousel" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                <div class="carousel-item active">
                                    <img src="/images/case-annex-before.jpg" class="d-block w-100" alt="Annex basement before lowering">
                                    <div class="position-absolute top-0 start-0 bg-danger text-white px-3 py-1 m-2">
                                        <small>BEFORE</small>
                                    </div>
                                </div>
                                <div class="carousel-item">
                                    <img src="/images/case-annex-after.jpg" class="d-block w-100" alt="Annex basement after underpinning">
                                    <div class="position-absolute top-0 start-0 bg-success text-white px-3 py-1 m-2">
                                        <small>AFTER</small>
                                    </div>
                                </div>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#project3Carousel" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon"></span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#project3Carousel" data-bs-slide="next">
                                <span class="carousel-control-next-icon"></span>
                            </button>
                        </div>
                    </div>
                    <div class="card-body p-4">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <span class="badge bg-info">Basement Lowering</span>
                            <small class="text-muted">The Annex, Toronto</small>
                        </div>
                        <h4 class="h5 mb-3">Basement Underpinning for Legal Suite</h4>
                        <p class="text-muted mb-3">
                            Victorian home in The Annex transformed unusable 5.5' basement into legal 8.5' rental suite. 
                            Full underpinning with integrated waterproofing system.
                        </p>
                        
                        <div class="row g-3 mb-3">
                            <div class="col-4 text-center">
                                <div class="text-primary h5 mb-0">3 ft</div>
                                <small class="text-muted">Added Height</small>
                            </div>
                            <div class="col-4 text-center">
                                <div class="text-success h5 mb-0">$2,800</div>
                                <small class="text-muted">Monthly Rent</small>
                            </div>
                            <div class="col-4 text-center">
                                <div class="text-warning h5 mb-0">850 sqft</div>
                                <small class="text-muted">Living Space</small>
                            </div>
                        </div>
                        
                        <div class="border-top pt-3">
                            <h6 class="mb-2">Solutions Implemented:</h6>
                            <ul class="list-unstyled mb-0">
                                <li><i class="fas fa-check text-success me-2"></i>Complete basement underpinning</li>
                                <li><i class="fas fa-check text-success me-2"></i>Waterproof membrane installation</li>
                                <li><i class="fas fa-check text-success me-2"></i>New concrete floor with radiant heating</li>
                            </ul>
                        </div>
                        
                        <div class="mt-3">
                            <a href="/case-studies/annex-underpinning/" class="btn btn-primary btn-sm">
                                View Full Case Study <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Project 4 - Complete System -->
            <div class="col-lg-6 project-item" data-category="flooding">
                <div class="card h-100 shadow-lg border-0 overflow-hidden hover-shadow animate-on-scroll" data-animation="animate__fadeInUp" style="animation-delay: 0.3s;">
                    <div class="position-relative">
                        <div id="project4Carousel" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                <div class="carousel-item active">
                                    <img src="/images/case-forest-hill-before.jpg" class="d-block w-100" alt="Forest Hill water damage">
                                    <div class="position-absolute top-0 start-0 bg-danger text-white px-3 py-1 m-2">
                                        <small>BEFORE</small>
                                    </div>
                                </div>
                                <div class="carousel-item">
                                    <img src="/images/case-forest-hill-after.jpg" class="d-block w-100" alt="Forest Hill waterproofed">
                                    <div class="position-absolute top-0 start-0 bg-success text-white px-3 py-1 m-2">
                                        <small>AFTER</small>
                                    </div>
                                </div>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#project4Carousel" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon"></span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#project4Carousel" data-bs-slide="next">
                                <span class="carousel-control-next-icon"></span>
                            </button>
                        </div>
                    </div>
                    <div class="card-body p-4">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <span class="badge bg-primary">Complete System</span>
                            <small class="text-muted">Forest Hill, Toronto</small>
                        </div>
                        <h4 class="h5 mb-3">Luxury Home Complete Waterproofing</h4>
                        <p class="text-muted mb-3">
                            $3.5M Forest Hill estate with chronic water issues threatening wine cellar and home theater. 
                            Comprehensive interior/exterior waterproofing solution.
                        </p>
                        
                        <div class="row g-3 mb-3">
                            <div class="col-4 text-center">
                                <div class="text-primary h5 mb-0">3,500</div>
                                <small class="text-muted">Sq Ft Protected</small>
                            </div>
                            <div class="col-4 text-center">
                                <div class="text-success h5 mb-0">Zero</div>
                                <small class="text-muted">Leaks Since</small>
                            </div>
                            <div class="col-4 text-center">
                                <div class="text-warning h5 mb-0">$250K</div>
                                <small class="text-muted">Assets Protected</small>
                            </div>
                        </div>
                        
                        <div class="border-top pt-3">
                            <h6 class="mb-2">Solutions Implemented:</h6>
                            <ul class="list-unstyled mb-0">
                                <li><i class="fas fa-check text-success me-2"></i>Interior & exterior waterproofing</li>
                                <li><i class="fas fa-check text-success me-2"></i>Quad-pump system with monitoring</li>
                                <li><i class="fas fa-check text-success me-2"></i>Smart home water detection integration</li>
                            </ul>
                        </div>
                        
                        <div class="mt-3">
                            <a href="/case-studies/forest-hill-luxury/" class="btn btn-primary btn-sm">
                                View Full Case Study <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Statistics Section -->
        <div class="mt-5 p-5 bg-light rounded text-center animate-on-scroll" data-animation="animate__fadeIn">
            <h3 class="mb-4">Our Toronto Waterproofing Impact</h3>
            <div class="row g-4">
                <div class="col-md-3 col-6">
                    <div class="text-primary">
                        <i class="fas fa-home fa-3x mb-3"></i>
                        <h4 class="counter" data-target="50000">0</h4>
                        <p class="mb-0">Homes Protected</p>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="text-success">
                        <i class="fas fa-tint-slash fa-3x mb-3"></i>
                        <h4 class="counter" data-target="99.8">0</h4>
                        <p class="mb-0">Success Rate %</p>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="text-warning">
                        <i class="fas fa-dollar-sign fa-3x mb-3"></i>
                        <h4>$<span class="counter" data-target="125">0</span>M</h4>
                        <p class="mb-0">Property Value Protected</p>
                    </div>
                </div>
                <div class="col-md-3 col-6">
                    <div class="text-info">
                        <i class="fas fa-clock fa-3x mb-3"></i>
                        <h4 class="counter" data-target="90">0</h4>
                        <p class="mb-0">Min Avg Response Time</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- CTA Section -->
        <div class="text-center mt-5">
            <h3 class="mb-3">Ready to Join Our Success Stories?</h3>
            <p class="lead mb-4">Let us transform your wet basement into a dry, valuable living space</p>
            <a href="#instant-quote" class="btn btn-primary btn-lg me-3">
                Get Your Free Assessment
            </a>
            <a href="/portfolio/" class="btn btn-outline-primary btn-lg">
                View All Projects
            </a>
        </div>
    </div>
</section>

<style>
.project-item .card {
    transition: all 0.3s ease;
}
.project-item .card:hover {
    transform: translateY(-5px);
}
.carousel-control-prev,
.carousel-control-next {
    width: 40px;
    height: 40px;
    background-color: rgba(0,0,0,0.5);
    border-radius: 50%;
    top: 50%;
    transform: translateY(-50%);
}
.carousel-control-prev {
    left: 10px;
}
.carousel-control-next {
    right: 10px;
}
</style>

<script>
// Filter projects
function filterProjects(category) {
    const items = document.querySelectorAll('.project-item');
    const buttons = document.querySelectorAll('.btn-group button');
    
    buttons.forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    
    items.forEach(item => {
        if (category === 'all' || item.dataset.category.includes(category)) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
}

// Counter animation
const counters = document.querySelectorAll('.counter');
const speed = 200;

counters.forEach(counter => {
    const animate = () => {
        const value = +counter.getAttribute('data-target');
        const data = +counter.innerText;
        const time = value / speed;
        
        if (data < value) {
            counter.innerText = Math.ceil(data + time);
            setTimeout(animate, 1);
        } else {
            counter.innerText = value;
        }
    }
    
    // Start animation when in viewport
    const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                animate();
                observer.unobserve(entry.target);
            }
        });
    });
    
    observer.observe(counter);
});
</script>