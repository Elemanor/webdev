<!-- Problem Cards - Zara's Icon Storytelling Gallery -->
<section class="py-20 bg-gradient-to-b from-gray-50 to-white relative overflow-hidden">
    <!-- Background Icon Pattern -->
    <div class="absolute inset-0 pointer-events-none opacity-5">
        <div class="icon-grid">
            <i class="fas fa-tint"></i>
            <i class="fas fa-home"></i>
            <i class="fas fa-shield-alt"></i>
            <i class="fas fa-tools"></i>
        </div>
    </div>
    
    <div class="container relative z-10">
        <div class="text-center mb-12">
            <!-- Animated Icon Header -->
            <div class="icon-symphony justify-center mb-4">
                <div class="icon-story icon-reveal icon-glow">
                    <i class="fas fa-exclamation-circle fa-3x text-danger"></i>
                </div>
            </div>
            
            <h2 class="display-5 fw-bold mb-4">
                We Fix Every Basement Problem - 
                <span class="text-primary">Click Your Issue Below</span>
            </h2>
            
            <!-- Icon Progress Indicator -->
            <div class="icon-trail-container d-flex justify-content-center gap-2 mb-4">
                <div class="icon-trail active">
                    <i class="fas fa-search text-primary"></i>
                </div>
                <i class="fas fa-arrow-right text-muted"></i>
                <div class="icon-trail">
                    <i class="fas fa-clipboard-check text-muted"></i>
                </div>
                <i class="fas fa-arrow-right text-muted"></i>
                <div class="icon-trail">
                    <i class="fas fa-hammer text-muted"></i>
                </div>
                <i class="fas fa-arrow-right text-muted"></i>
                <div class="icon-trail">
                    <i class="fas fa-check-circle text-muted"></i>
                </div>
            </div>
        </div>
        
        <div class="row g-4">
            <!-- Basement Flooding Card -->
            <div class="col-md-4 col-sm-6">
                <div class="card h-100 shadow-sm hover-shadow problem-card-icon position-relative overflow-hidden">
                    <div class="card-body text-center p-4">
                        <!-- Icon Stack Animation -->
                        <div class="fa-stack fa-3x mb-3 icon-stack-animated">
                            <i class="fas fa-circle fa-stack-2x text-primary-light"></i>
                            <i class="fas fa-water fa-stack-1x text-primary icon-float"></i>
                        </div>
                        
                        <h4 class="h5 fw-bold mb-3">Basement Flooding</h4>
                        
                        <!-- Icon Story Pills -->
                        <div class="d-flex justify-content-center gap-2 mb-3">
                            <span class="badge bg-light text-dark">
                                <i class="fas fa-tint text-danger me-1"></i>Water
                            </span>
                            <span class="badge bg-light text-dark">
                                <i class="fas fa-arrow-right text-primary mx-1"></i>
                            </span>
                            <span class="badge bg-light text-dark">
                                <i class="fas fa-shield-alt text-success me-1"></i>Protected
                            </span>
                        </div>
                        
                        <p class="text-muted mb-3">
                            Complete waterproofing systems with lifetime warranty
                        </p>
                        
                        <!-- Price with Icon -->
                        <div class="d-flex align-items-center justify-content-center mb-3">
                            <i class="fas fa-tag text-primary me-2 icon-bounce"></i>
                            <span class="text-primary fw-bold">From $3,000</span>
                        </div>
                        
                        <button class="btn btn-primary btn-sm icon-story" data-problem="flooding">
                            <i class="fas fa-search me-1"></i>
                            View Solutions
                            <i class="fas fa-arrow-right ms-1 icon-dance"></i>
                        </button>
                    </div>
                    
                    <!-- Hover Icon Burst -->
                    <div class="problem-hover-icons position-absolute inset-0 pointer-events-none">
                        <i class="fas fa-droplet hover-icon"></i>
                        <i class="fas fa-droplet hover-icon"></i>
                        <i class="fas fa-droplet hover-icon"></i>
                    </div>
                </div>
            </div>
            
            <!-- Foundation Cracks Card -->
            <div class="col-md-4 col-sm-6">
                <div class="card h-100 shadow-sm hover-shadow problem-card-icon position-relative overflow-hidden">
                    <div class="card-body text-center p-4">
                        <div class="fa-stack fa-3x mb-3 icon-stack-animated">
                            <i class="fas fa-circle fa-stack-2x text-danger-light"></i>
                            <i class="fas fa-exclamation-triangle fa-stack-1x text-danger icon-shake"></i>
                        </div>
                        
                        <h4 class="h5 fw-bold mb-3">Foundation Cracks</h4>
                        
                        <div class="d-flex justify-content-center gap-2 mb-3">
                            <span class="badge bg-light text-dark">
                                <i class="fas fa-bolt text-warning me-1"></i>Crack
                            </span>
                            <span class="badge bg-light text-dark">
                                <i class="fas fa-arrow-right text-primary mx-1"></i>
                            </span>
                            <span class="badge bg-light text-dark">
                                <i class="fas fa-band-aid text-success me-1"></i>Sealed
                            </span>
                        </div>
                        
                        <p class="text-muted mb-3">
                            Professional injection that seals leaks forever
                        </p>
                        
                        <div class="d-flex align-items-center justify-content-center mb-3">
                            <i class="fas fa-dollar-sign text-primary me-2 icon-pulse"></i>
                            <span class="text-primary fw-bold">From $500/crack</span>
                        </div>
                        
                        <button class="btn btn-danger btn-sm icon-story" data-problem="cracks">
                            <i class="fas fa-wrench me-1 icon-spin-custom"></i>
                            Fix Cracks Now
                        </button>
                    </div>
                    
                    <div class="problem-hover-icons position-absolute inset-0 pointer-events-none">
                        <i class="fas fa-bolt hover-icon text-warning"></i>
                        <i class="fas fa-bolt hover-icon text-warning"></i>
                    </div>
                </div>
            </div>
            
            <!-- Wet/Damp Basement Card -->
            <div class="col-md-4 col-sm-6">
                <div class="card h-100 shadow-sm hover-shadow problem-card-icon position-relative overflow-hidden">
                    <div class="card-body text-center p-4">
                        <div class="fa-stack fa-3x mb-3 icon-stack-animated">
                            <i class="fas fa-circle fa-stack-2x text-warning-light"></i>
                            <i class="fas fa-tint fa-stack-1x text-warning icon-dance"></i>
                        </div>
                        
                        <h4 class="h5 fw-bold mb-3">Wet/Damp Basement</h4>
                        
                        <div class="d-flex justify-content-center gap-2 mb-3">
                            <span class="badge bg-light text-dark">
                                <i class="fas fa-cloud-rain text-info me-1"></i>Damp
                            </span>
                            <span class="badge bg-light text-dark">
                                <i class="fas fa-arrow-right text-primary mx-1"></i>
                            </span>
                            <span class="badge bg-light text-dark">
                                <i class="fas fa-sun text-warning me-1"></i>Dry
                            </span>
                        </div>
                        
                        <p class="text-muted mb-3">
                            Advanced drainage and vapor barrier systems
                        </p>
                        
                        <div class="d-flex align-items-center justify-content-center mb-3">
                            <i class="fas fa-chart-line text-primary me-2 icon-float"></i>
                            <span class="text-primary fw-bold">From $5,000</span>
                        </div>
                        
                        <button class="btn btn-warning btn-sm icon-story" data-problem="damp">
                            <i class="fas fa-tint-slash me-1"></i>
                            Get Dry
                        </button>
                    </div>
                    
                    <div class="problem-hover-icons position-absolute inset-0 pointer-events-none">
                        <i class="fas fa-cloud hover-icon text-info"></i>
                        <i class="fas fa-cloud hover-icon text-info"></i>
                    </div>
                </div>
            </div>
            
            <!-- Sump Pump Issues Card -->
            <div class="col-md-4 col-sm-6">
                <div class="card h-100 shadow-sm hover-shadow problem-card-icon position-relative overflow-hidden">
                    <div class="card-body text-center p-4">
                        <div class="fa-stack fa-3x mb-3 icon-stack-animated">
                            <i class="fas fa-circle fa-stack-2x text-info-light"></i>
                            <i class="fas fa-plug fa-stack-1x text-info icon-pulse"></i>
                        </div>
                        
                        <h4 class="h5 fw-bold mb-3">Sump Pump Issues</h4>
                        
                        <div class="d-flex justify-content-center gap-2 mb-3">
                            <span class="badge bg-light text-dark">
                                <i class="fas fa-power-off text-danger me-1"></i>Failed
                            </span>
                            <span class="badge bg-light text-dark">
                                <i class="fas fa-arrow-right text-primary mx-1"></i>
                            </span>
                            <span class="badge bg-light text-dark">
                                <i class="fas fa-battery-full text-success me-1"></i>Backup
                            </span>
                        </div>
                        
                        <p class="text-muted mb-3">
                            Triple-pump systems with battery backup
                        </p>
                        
                        <div class="d-flex align-items-center justify-content-center mb-3">
                            <i class="fas fa-shield-alt text-primary me-2 icon-glow"></i>
                            <span class="text-primary fw-bold">From $2,500</span>
                        </div>
                        
                        <button class="btn btn-info btn-sm icon-story" data-problem="sump">
                            <i class="fas fa-bolt me-1 icon-shake"></i>
                            Upgrade Now
                        </button>
                    </div>
                    
                    <div class="problem-hover-icons position-absolute inset-0 pointer-events-none">
                        <i class="fas fa-bolt hover-icon text-warning"></i>
                    </div>
                </div>
            </div>
            
            <!-- Complete Protection Card (Featured) -->
            <div class="col-md-4 col-sm-6">
                <div class="card h-100 shadow-lg border-primary problem-card-icon position-relative overflow-hidden">
                    <div class="position-absolute top-0 end-0 bg-primary text-white px-3 py-1 rounded-start">
                        <small class="d-flex align-items-center">
                            <i class="fas fa-star me-1 icon-pulse"></i>Most Popular
                        </small>
                    </div>
                    <div class="card-body text-center p-4">
                        <div class="fa-stack fa-3x mb-3 icon-stack-animated">
                            <i class="fas fa-circle fa-stack-2x text-success-light"></i>
                            <i class="fas fa-shield-alt fa-stack-1x text-success icon-glow"></i>
                        </div>
                        
                        <h4 class="h5 fw-bold mb-3">Complete Protection</h4>
                        
                        <div class="d-flex justify-content-center gap-2 mb-3">
                            <div class="icon-badge" data-badge="100%">
                                <i class="fas fa-home text-primary"></i>
                            </div>
                            <i class="fas fa-plus text-muted mx-2"></i>
                            <div class="icon-badge" data-badge="âˆž">
                                <i class="fas fa-calendar-check text-success"></i>
                            </div>
                        </div>
                        
                        <p class="text-muted mb-3">
                            Full interior + exterior waterproofing system
                        </p>
                        
                        <div class="d-flex align-items-center justify-content-center mb-3">
                            <i class="fas fa-trophy text-primary me-2 icon-color-shift"></i>
                            <span class="text-primary fw-bold">From $15,000</span>
                        </div>
                        
                        <button class="btn btn-success btn-sm icon-story" data-symphony="waterproofing">
                            <i class="fas fa-star me-1 icon-spin-custom"></i>
                            Get Ultimate Protection
                        </button>
                    </div>
                    
                    <div class="problem-hover-icons position-absolute inset-0 pointer-events-none">
                        <i class="fas fa-star hover-icon text-warning"></i>
                        <i class="fas fa-star hover-icon text-warning"></i>
                        <i class="fas fa-star hover-icon text-warning"></i>
                    </div>
                </div>
            </div>
            
            <!-- Emergency Response Card -->
            <div class="col-md-4 col-sm-6">
                <div class="card h-100 shadow-lg border-danger problem-card-icon position-relative overflow-hidden">
                    <div class="position-absolute top-0 start-0 w-100">
                        <div class="bg-danger text-white text-center py-2 icon-badge-pulse">
                            <i class="fas fa-phone-alt me-1 icon-shake"></i>
                            24/7 EMERGENCY
                        </div>
                    </div>
                    <div class="card-body text-center p-4 mt-4">
                        <div class="icon-burst mb-3">
                            <i class="fas fa-exclamation-triangle fa-3x text-danger icon-pulse"></i>
                        </div>
                        
                        <h4 class="h5 fw-bold mb-3 text-danger">Flooding Now?</h4>
                        
                        <div class="icon-progress mb-3">
                            <i class="fas fa-clock text-danger"></i>
                            <span class="ms-2 fw-bold">Response in &lt; 2 Hours</span>
                        </div>
                        
                        <p class="text-muted mb-3">
                            Emergency crews ready 24/7 across Toronto
                        </p>
                        
                        <a href="tel:{{ .Site.Params.phone }}" class="btn btn-danger btn-lg w-100 icon-story" data-symphony="emergency">
                            <i class="fas fa-phone-alt me-2 icon-shake"></i>
                            CALL NOW
                            <i class="fas fa-ambulance ms-2 icon-dance"></i>
                        </a>
                    </div>
                    
                    <div class="problem-hover-icons position-absolute inset-0 pointer-events-none">
                        <i class="fas fa-exclamation hover-icon text-danger animate-ping"></i>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Problem Navigator -->
        <div class="text-center mt-8">
            <p class="text-muted mb-3">
                <i class="fas fa-question-circle me-2 icon-float"></i>
                Not sure which solution you need?
            </p>
            <button class="btn btn-outline-primary btn-lg" onclick="startProblemDiagnosis()">
                <i class="fas fa-stethoscope me-2 icon-pulse"></i>
                Start Free Diagnosis
                <i class="fas fa-arrow-right ms-2 icon-dance"></i>
            </button>
        </div>
    </div>
</section>

<style>
/* Icon Grid Background */
.icon-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 2rem;
    width: 100%;
    height: 100%;
}

.icon-grid i {
    font-size: 3rem;
    color: currentColor;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: gentle-float 8s ease-in-out infinite;
}

/* Problem Card Hover Effects */
.problem-card-icon {
    transition: all 0.3s ease;
    cursor: pointer;
}

.problem-card-icon:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
}

.problem-card-icon:hover .icon-stack-animated .fa-stack-1x {
    animation-duration: 0.5s;
}

/* Hover Icons */
.problem-hover-icons {
    opacity: 0;
    transition: opacity 0.3s ease;
}

.problem-card-icon:hover .problem-hover-icons {
    opacity: 1;
}

.hover-icon {
    position: absolute;
    font-size: 1.5rem;
    opacity: 0;
    animation: float-away 2s ease-out infinite;
}

.hover-icon:nth-child(1) {
    top: 20%;
    left: 20%;
    animation-delay: 0s;
}

.hover-icon:nth-child(2) {
    top: 60%;
    right: 20%;
    animation-delay: 0.7s;
}

.hover-icon:nth-child(3) {
    bottom: 20%;
    left: 50%;
    animation-delay: 1.4s;
}

/* Icon Badge Pulse */
.icon-badge-pulse {
    animation: pulse-bg 2s ease-in-out infinite;
}

@keyframes pulse-bg {
    0%, 100% {
        background-color: #dc3545;
    }
    50% {
        background-color: #ff4757;
    }
}

/* Problem Diagnosis Animation */
@keyframes diagnosis-scan {
    0% {
        transform: translateY(0) scale(1);
        opacity: 1;
    }
    50% {
        transform: translateY(-20px) scale(1.1);
        opacity: 0.7;
    }
    100% {
        transform: translateY(0) scale(1);
        opacity: 1;
    }
}

.diagnosis-active .icon-story {
    animation: diagnosis-scan 1s ease-in-out;
}

/* Mobile Optimizations */
@media (max-width: 768px) {
    .icon-trail-container {
        flex-wrap: wrap;
    }
    
    .problem-hover-icons {
        display: none;
    }
}
</style>

<script>
// Problem Diagnosis Interactive
function startProblemDiagnosis() {
    const cards = document.querySelectorAll('.problem-card-icon');
    cards.forEach((card, index) => {
        setTimeout(() => {
            card.classList.add('diagnosis-active');
            setTimeout(() => card.classList.remove('diagnosis-active'), 1000);
        }, index * 200);
    });
}

// Problem Card Click Handlers
document.querySelectorAll('[data-problem]').forEach(btn => {
    btn.addEventListener('click', function() {
        const problem = this.dataset.problem;
        // Create icon celebration
        const celebration = document.createElement('div');
        celebration.className = 'floating-symphony';
        celebration.innerHTML = '<i class="fas fa-check symphony-note"></i>';
        this.appendChild(celebration);
        setTimeout(() => celebration.remove(), 2000);
    });
});
</script>